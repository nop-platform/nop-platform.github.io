<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="UTF-8">









  
  
  
    
  


  


  


  






  





  <title>�ӿ�����㿴��˷������Ŀ���չ��� - Nop</title>


  <meta property="og:title" content="�ӿ�����㿴��˷������Ŀ���չ���">


  <meta name="description" content="Nop Platform 2.0 是基于可逆计算原理从零开始构建的新一代低代码平台，它致力于克服低代码平台无法摆脱穷举法的困境，从理论层面超越组件技术，有效的解决粗粒度软件复用的问题。">
  <meta property="og:description" content="Nop Platform 2.0 是基于可逆计算原理从零开始构建的新一代低代码平台，它致力于克服低代码平台无法摆脱穷举法的困境，从理论层面超越组件技术，有效的解决粗粒度软件复用的问题。">



  
    
  


  <meta name="keywords" content="Nop,Nop平台,Nop 平台,Nop Platform,Nop社区,Nop 社区,Nop Community,可逆计算,软件构造理论,低代码,lowcode,low-code,low code,低代码平台,lcdp,软件工程">


<!-- 页面渲染兼容性 -->
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="renderer" content="webkit">
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<!-- 订阅 -->

<meta name="theme-color" content="#0871ab">
<link rel="shortcut icon" href="/images/nop/logo.png">


    
<link rel="stylesheet" href="/stylesheets/global.css">

    
<link rel="stylesheet" href="/stylesheets/ksio/vendors/share.css">

<link rel="stylesheet" href="/local/syntax-highlighting.css">

<link rel="stylesheet" href="/stylesheets/pages/post.css">

<link rel="stylesheet" href="/stylesheets/pages/doc.css">

    
    
<script src="/javascripts/ksio/vendors/jquery-1.11.3.min.js"></script>

    
<script src="/javascripts/ksio/vendors/bootstrap.min.js"></script>

  </head>
  
  
  <body class="Page" itemscope itemtype="http://schema.org/WebPage">
    

  <header class="Page-header">
  <div class="navbar navbar-static-top">
    <div class="container-fluid">
      <div class="navbar-header">
        
          <button class="navbar-toggle collapsed" type="button" data-target=".Page-navs" data-toggle="collapse">
            <span class="sr-only">Toggle navs</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        
        
          


  <a class="navbar-brand" href="/">Nop</a>


        
      </div>
      <!-- Nav menus -->
      <nav class="Page-navs navbar-collapse collapse">
        <ul class="nav navbar-nav navbar-right">
          
  
    <li class="dropdown">
      <a class="dropdown-toggle" href="javascript:void(0);" data-toggle="dropdown">学习 <span class="caret"></span></a>
      <ul class="dropdown-menu">
  
    <li><a href="/projects/nop-entropy/docs">指南</a>
</li>
  

  
    <li><a href="https://www.zhihu.com/column/reversible-computation?utm_source=https://nop-platform.gitee.io&amp;utm_medium=common-header" target="_blank" rel="external nofollow">文章</a>
</li>
  

  
    <li><a href="https://space.bilibili.com/3493261219990250?utm_source=https://nop-platform.gitee.io&amp;utm_medium=common-header" target="_blank" rel="external nofollow">视频</a>
</li>
  

</ul>
    </li>
  

  
    <li class="dropdown">
      <a class="dropdown-toggle" href="javascript:void(0);" data-toggle="dropdown">项目 <span class="caret"></span></a>
      <ul class="dropdown-menu">
  
    <li><a href="/projects/nop-entropy">Nop Entropy</a>
</li>
  

  
    <li><a href="/projects/nop-chaos">Nop Chaos</a>
</li>
  

</ul>
    </li>
  

  
    <li class="dropdown">
      <a class="dropdown-toggle" href="javascript:void(0);" data-toggle="dropdown">关于 <span class="caret"></span></a>
      <ul class="dropdown-menu">
  
    <li><a href="/community">社区</a>
</li>
  

  
    <li><a href="/team">团队</a>
</li>
  

</ul>
    </li>
  


        </ul>
      </nav>
    </div>
  </div>
</header>

<div class="Page-content">
  
  
    <aside class="Page-aside">
      <div class="AsideBrand">


  <a href="/">Nop</a>

</div>
      <nav class="AsideNav"><ul>
  
  
    
  
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/why-nop/">介绍</a>
      
      
        <ul>
  
  
    
  
  
    <li>
      
      
      
      
      
        
        
        
        
          
        
        <a href="/projects/nop-entropy/docs/">文档概览</a>
      
      
    </li>
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/tutorial/tutorial/">入门教程</a>
      
      
        <ul>
  
  
    
  
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/tutorial/simple/1-simple-service/">极简服务层开发</a>
      
      
    </li>
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/tutorial/simple/2-simple-dao/">极简数据访问层开发</a>
      
      
    </li>
  
</ul>

      
    </li>
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/compare/">与其他平台的对比</a>
      
      
    </li>
  
</ul>

      
    </li>
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/user-guide/">用户指南</a>
      
      
        <ul>
  
  
    
  
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/user-guide/installation/">安装和配置</a>
      
      
    </li>
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/user-guide/report/">报表引擎</a>
      
      
    </li>
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/user-guide/idea/idea-plugin/">IDEA插件使用</a>
      
      
    </li>
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/user-guide/monitor/grafana/">监控</a>
      
      
    </li>
  
</ul>

      
    </li>
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/arch/">软件架构</a>
      
      
        <ul>
  
  
    
  
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/arch/module-dependency/">模块依赖关系</a>
      
      
    </li>
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/core-code-guidance/">核心代码阅读导引</a>
      
      
    </li>
  
</ul>

      
    </li>
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/theory/">理论基础</a>
      
      
    </li>
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/dev-guide/">开发指南</a>
      
      
        <ul>
  
  
    
  
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/dev-guide/codegen/">代码生成器</a>
      
      
        <ul>
  
  
    
  
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/dev-guide/cli/">命令行工具</a>
      
      
    </li>
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/dev-guide/command/command/">命令行开发支持</a>
      
      
    </li>
  
</ul>

      
    </li>
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/dev-guide/config/">配置管理</a>
      
      
    </li>
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/dev-guide/ioc/">IoC容器</a>
      
      
        <ul>
  
  
    
  
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/dev-guide/ioc/aop/">AOP支持</a>
      
      
    </li>
  
</ul>

      
    </li>
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/dev-guide/orm/">ORM框架</a>
      
      
    </li>
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/dev-guide/xlang/">XLang语言</a>
      
      
        <ul>
  
  
    
  
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/dev-guide/xlang/xdef/">XDef元模型</a>
      
      
    </li>
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/dev-guide/xlang/xdsl/">XDSL领域语言</a>
      
      
    </li>
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/dev-guide/xlang/xscript/">XScript脚本语言</a>
      
      
    </li>
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/dev-guide/xlang/xpl/">Xpl模板语言</a>
      
      
    </li>
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/dev-guide/xlang/meta-programming/">元编程</a>
      
      
    </li>
  
</ul>

      
    </li>
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/dev-guide/model/">Excel模型</a>
      
      
    </li>
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/dev-guide/graphql/">GraphQL引擎</a>
      
      
    </li>
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/dev-guide/microservice/">分布式微服务</a>
      
      
    </li>
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/dev-guide/rule/rule/">规则引擎</a>
      
      
    </li>
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/dev-guide/workflow/task-flow/">逻辑编排</a>
      
      
    </li>
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/dev-guide/autotest/">自动化测试</a>
      
      
    </li>
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/dev-guide/tenant/">多租户</a>
      
      
    </li>
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/dev-guide/delta/delta-customization/">Delta定制</a>
      
      
        <ul>
  
  
    
  
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/dev-guide/vfs/">Delta文件系统</a>
      
      
    </li>
  
</ul>

      
    </li>
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/dev-guide/auth/">权限配置</a>
      
      
    </li>
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/dev-guide/biz/">业务规则</a>
      
      
    </li>
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/dev-guide/nocode/">动态模型</a>
      
      
    </li>
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/dev-guide/xui/">前端模型</a>
      
      
    </li>
  
</ul>

      
    </li>
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/dev-guide/integration/">第三方集成</a>
      
      
        <ul>
  
  
    
  
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/dev-guide/spring/">spring集成</a>
      
      
    </li>
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/dev-guide/quarkus/">quarkus集成</a>
      
      
    </li>
  
</ul>

      
    </li>
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/dev-guide/ide/idea/">IDEA插件</a>
      
      
        <ul>
  
  
    
  
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/dev-guide/ide/plugin-dev/">插件开发</a>
      
      
    </li>
  
</ul>

      
    </li>
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/faq/faq/">常见问题</a>
      
      
        <ul>
  
  
    
  
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/faq/debug-errors/">错误诊断</a>
      
      
    </li>
  
    <li>
      
      
      
      
      
        
        
        
        
          
          
        
        <a href="/projects/nop-entropy/docs/dev-guide/recipe/">常见问题解决方案</a>
      
      
    </li>
  
</ul>

      
    </li>
  
</ul>
</nav>
    </aside>
  
  <main class="Page-main">
    <article class="Article container-fluid">
      <header class="Article-header">
        
  
    <h1 class="Article-title">�ӿ�����㿴��˷������Ŀ���չ���</h1>
  
  


      </header>
      <div class="Article-content col-md-9"><p>�ܶ�ʹ���ƽ̨�ĺ�����ʵ����һ��CRUDģ�ͣ�һ��ͨ�����õ���չ�㣨�������ǰ�������ȣ����ṩһ���Ŀɶ����ԡ�Nopƽ̨��CRUDģ��û���κε������ԣ������õ�CrudBizModel������һ����ͨ��BizModelģ�ͣ���Nopƽ̨�����в�û���κ����CRUD��չ������⴦�����ڱ����У��ҽ���CrudBizModelΪ��������һ��Nopƽ̨��ʵ�ֺ�̨����ʱ�ĳ�����չ������</p>
<h2 id="һ-ͨ���ص������s����ʱ��"><a href="#һ-ͨ���ص������s����ʱ��" class="headerlink" title="һ. ͨ���ص������ṩ����ʱ��"></a>һ. ͨ���ص������ṩ����ʱ��</h2><p>CrudBizModel�еĴ󲿷ַ���������������������ϲ㺯�������²��ʵ�ֺ���ʱͨ�������ͻص�������ʵ�ֶ��ơ�</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><code class="hljs javascript">public <span class="hljs-title class_">PageBean</span>&lt;T&gt; <span class="hljs-title function_">findPage</span>(<span class="hljs-params">@Optional @Name(<span class="hljs-string">&quot;query&quot;</span>) QueryBean query,</span><br><span class="hljs-params">                            FieldSelectionBean selection, </span><br><span class="hljs-params">                            IServiceContext context</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">doFindPage0</span>(query, <span class="hljs-title function_">getBizObjName</span>(), prepareQuery, <br>               selection, context);<br>&#125;<br><br>@<span class="hljs-title class_">BizAction</span><br>public <span class="hljs-title class_">PageBean</span>&lt;T&gt; <span class="hljs-title function_">doFindPage0</span>(<span class="hljs-params">@Name(<span class="hljs-string">&quot;query&quot;</span>) QueryBean query,</span><br><span class="hljs-params">                               @Name(<span class="hljs-string">&quot;authObjName&quot;</span>) <span class="hljs-built_in">String</span> authObjName,</span><br><span class="hljs-params">                               @Name(<span class="hljs-string">&quot;prepareQuery&quot;</span>) BiConsumer&lt;QueryBean, </span><br><span class="hljs-params">                               IServiceContext&gt; prepareQuery, </span><br><span class="hljs-params">                               FieldSelectionBean selection,</span><br><span class="hljs-params">                               IServiceContext context</span>) &#123;<br>     query = <span class="hljs-title function_">prepareFindPageQuery</span>(query, authObjName, <br>                 <span class="hljs-variable constant_">METHOD_FIND_PAGE</span>, prepareQuery, context);                      <br>    ...<br>&#125;<br></code></pre></td></tr></table></figure>

<p>findPage������ͨ��<code>doFindPage0</code>�������չ�ĺ�����ʵ�֣�<code>doFindPage0</code>�ṩ�����������õĲ���</p>
<ol>
<li><strong>authObjName</strong> : ȱʡ���������ֵ��Ӧ�ڵ�ǰ��ҵ�������(bizObjName)��ָ����ͬ��ֵ�����ڲ�ͬҵ�񳡾���Ӧ�ò�ͬ������Ȩ�޹���������</li>
<li><strong>prepareQuery</strong>: query������Ӧ��ǰ�˴���Ĳ�ѯ��������̨����XMetaģ������У�����в�ѯ�ֶκͲ�ѯ���������������Χ֮�ڡ�prepareQuery�ص�����������ǰ̨�����query�������������Ӷ���Ĳ�ѯ����������������׷�ӵĲ�ѯ��������Ҫ����У�顣</li>
</ol>
<p>ʹ�ûص������൱�����ṩ��һ�ֻ�����ϵ���չ��ʽ�����Ȼ�����̳кͺ������صķ�ʽҪ������</p>
<h2 id="��-����XMetaԪ����g��ͳһ��̬����gʽ"><a href="#��-����XMetaԪ����g��ͳһ��̬����gʽ" class="headerlink" title="��. ����XMetaԪ����ģ��ͳһ��̬����ģʽ"></a>��. ����XMetaԪ����ģ��ͳһ��̬����ģʽ</h2><p>һ��ĺ�������ֻ�Ǹ���һģһ���Ĵ����߼��������ͨ�������ص��������ṩ���޵���չ�㣬���ܶ�ʱ�򲢲�������ȫһ���Ĵ����߼���<strong>�����ܹ�����ֻ��һ�ִ���ģʽ</strong>�����磬save�����Ļ��������߼����£�</p>
<ol>
<li>��֤ǰ̨�ύ���ֶ���Ϣ</li>
<li>����֧���߼�ɾ����ʵ�壬��Ҫ����Ƿ���ڱ��Ϊɾ����ʵ��</li>
<li>������ݿ��в������ظ��ļ�¼�����粻��������û�����ͬ��������֤��</li>
<li>�����������ݴ���ʵ����󣬶��ڸ��ӵ����ӱ��ṹ��Ҫ�������⴦��</li>
</ol>
<p>ÿ�ֲ�ͬʵ���save�߼�������ṹ����ȫһ�µģ��������ϸ�ڲ�ͬ������ÿ���ֶε����ͺ�У����򶼲�ͬ�������ֶλ���Ҫִ��ת���߼�����ǰ̨�����ֵת��Ϊ��̨Ҫ��ĸ�ʽ�ȡ���ͬʵ������������Ψһ�Ե��ֶ�Ҳ��ͬ��<br>��Nopƽ̨��ÿ��ҵ����󶼿��Թ���һ��XMeta�ļ���ͨ�������Զ���ҵ������Ԫ���ݡ�</p>
<blockquote>
<p>XMetaԪ���ݱ�Java��ע��Ҫ��������ǿ����֧��Ԫ��̺��Զ�����չ��ͨ��XDefԪģ���Զ����нṹУ�顣����XMeta�Ľ��ܣ��μ�<a href="../../xlang/xmeta/">xmeta.md</a></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> T <span class="hljs-title function_">save</span><span class="hljs-params">(<span class="hljs-meta">@Name(&quot;data&quot;)</span> Map&lt;String, Object&gt; data, IServiceContext context)</span> &#123;<br>     <span class="hljs-keyword">return</span> doSave(data, <span class="hljs-literal">null</span>, <span class="hljs-built_in">this</span>::defaultPrepareSave, context);<br>&#125;<br><br> <span class="hljs-meta">@BizAction</span><br> <span class="hljs-keyword">public</span> T <span class="hljs-title function_">doSave</span><span class="hljs-params">(<span class="hljs-meta">@Name(&quot;data&quot;)</span> Map&lt;String, Object&gt; data, </span><br><span class="hljs-params">                 <span class="hljs-meta">@Name(&quot;inputSelection&quot;)</span> FieldSelectionBean inputSelection,</span><br><span class="hljs-params">                 <span class="hljs-meta">@Name(&quot;prepareSave&quot;)</span> BiConsumer&lt;EntityData&lt;T&gt;, </span><br><span class="hljs-params">                 IServiceContext&gt; prepareSave, </span><br><span class="hljs-params">                 IServiceContext context)</span> &#123;<br>     <span class="hljs-keyword">if</span> (CollectionHelper.isEmptyMap(data))<br>         <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NopException</span>(ERR_BIZ_EMPTY_DATA_FOR_SAVE)<br>              .param(ARG_BIZ_OBJ_NAME, getBizObjName());<br><br>     <span class="hljs-comment">// 1. ����XMeta����ʵ������У���ת��</span><br>     <span class="hljs-type">ObjMetaBasedValidator</span> <span class="hljs-variable">validator</span> <span class="hljs-operator">=</span> <br>         <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjMetaBasedValidator</span>(bizObjectManager, bizObj.getBizObjName(),<br>             objMeta,context, <span class="hljs-literal">true</span>);<br><br>     Map&lt;String, Object&gt; validated = <br>           validator.validateForSave(data, inputSelection);<br><br>     <span class="hljs-comment">// 2. ����ORMʵ��ģ�Ͳ����ж��Ƿ������߼�ɾ��</span><br>     <span class="hljs-type">T</span> <span class="hljs-variable">entity</span> <span class="hljs-operator">=</span> recoverLogicalDeleted(data, objMeta);<br>     <span class="hljs-type">boolean</span> <span class="hljs-variable">recover</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>;<br>     <span class="hljs-keyword">if</span> (entity == <span class="hljs-literal">null</span>) &#123;<br>         recover = <span class="hljs-literal">false</span>;<br>         entity = dao().newEntity();<br>     &#125;<br><br>     <span class="hljs-type">EntityData</span> <span class="hljs-variable">entityData</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">EntityData</span>&lt;&gt;(data, validated, entity, objMeta); <br><br>     <span class="hljs-comment">// 3. ����XMeta�����õ�Ψһ������ظ���¼</span><br>     checkUniqueForSave(entityData);<br><br>     <span class="hljs-comment">// 4. ����XMeta����ȷ����ν����ӱ��������õ��½���ʵ�������</span><br>     <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrmEntityCopier</span>(daoProvider, bizObjectManager)<br>             .copyToEntity(entityData.getValidatedData(),<br>                 entityData.getEntity(), <span class="hljs-literal">null</span>, entityData.getObjMeta(), <br>                 getBizObjName(), BizConstants.METHOD_SAVE, <br>                 context.getEvalScope());<br><br>     <span class="hljs-comment">// 5. ���ʵ���������Ժ���������Ȩ��Ҫ�󣬶Ե�ǰ�û��ɼ�</span><br>     checkDataAuth(BizConstants.METHOD_SAVE, entityData.getEntity(), context);<br><br>     <span class="hljs-comment">// 6. ִ�ж���Ķ����߼�</span><br>     <span class="hljs-keyword">if</span> (prepareSave != <span class="hljs-literal">null</span>)<br>         prepareSave.accept(entityData, context);<br><br>     doSaveEntity(entityData, context);<br><br>     <span class="hljs-keyword">return</span> entityData.getEntity();<br> &#125;<br></code></pre></td></tr></table></figure>

<p>Nopƽ̨�ṩ��ͨ�õ�ObjMetaBasedValidator��OrmEntityCopier�����ǿ�������XMetaԪ����ģ���е���Ϣ��<strong>ͳһʵ��</strong>����У���Լ�ʵ����󹹽���</p>
<p>���Ƶķ���Ƶ�����ڸ���ͨ�ô��������У�����findTreeEntityPage����XMeta�е�TreeModel�������������Խṹ�Ĳ�ѯ��䡣</p>
<p>ʹ��XMeta����һ���ô���֧��Delta���ơ������ڲ�ͬ��Ӧ���ж���ͬһ��ҵ��������ʹ�ò�ͬ��XMetaģ�ͣ��Ӷ�����ʵ�ʴ��������ݡ����ʹ��ǿ���͵�DTO����ͺ����ڲ��޸Ļ�����ƷԴ��������ʵ���߼����ơ�</p>
<p><strong>GraphQL�Ķ������������XMeta�Ķ���ṹ�����������Լ��������Ĳ��������������һ�𣬿��Խ��󲿷�CRUD��ص��߼��̻�������һ�㲻��Ҫ��дCRUD��صĴ��룬Ҳ����Ҫ��Բ�ͬ�ĳ������ɴ�������</strong>��ͨ��ͳһ��ʵ�ּ���������������������ֻ��Ҫ��CRUDģ�Ͳ���ƫ���׼CRUD�������̵Ĳ�����Ϣ���ɡ�</p>
<h2 id="��-ͨ��j׺�����﷨�ھֲ���չ����g��"><a href="#��-ͨ��j׺�����﷨�ھֲ���չ����g��" class="headerlink" title="��. ͨ��ǰ׺�����﷨�ھֲ���չ����ģ��"></a>��. ͨ��ǰ׺�����﷨�ھֲ���չ����ģ��</h2><p>Nopƽ̨�ṩ����һ���������Ա�̷�ʽ(Language Oriented Programming)��Ҳ����˵��Ϊ�˽����ǰ��ҵ�����⣬���ǲ���ֱ��ʹ��ͨ�����ԣ������Ƚ���һ�������ض�����(DSL)��Ȼ�����������ȥ����ҵ���߼���</p>
<p>���ð�DSL�����ر����ظ��ӣ�����ʵֻ��ģ�͵�һ���ı�չ����ʽ��DSL���ı�����ģ�ͻ���ֻҪ���Ƕ�ҵ�����⽨����һ������ģ�ͣ�Ȼ��Ϊ��ѡ��һ���ı�������ʽ��������Ȼ��Ϊ��һ��DSL��</p>
<p>��ǰ��˷����΢����ı����£�ǰ�˺ͺ��֮�䡢��˷���֮������н�����Ҫͨ�����л���Ķ������ݡ������������������Ϲ�£��صĹ��ܣ�����ֻ��¶���������ȵķ���ӿڣ���ô�������ӿڵĲ������൱����ĳ��DSL��</p>
<p><strong>���������Կ�����ĳ��ִ��DSL�������������Ĳ�����ͬ��ָ�������ִ�в�ͬ�Ĵ����߼�</strong>���ٸ���������ӣ�CrudBizModel���ṩ��findPage&#x2F;findList��ͨ�ò�ѯ���������������յĲ�ѯ��������QueryBean�Ϳ��Կ�����һ��DSL�������������һ�����Ӷ���ṹ����ϲ�ѯ������</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">POST /r/NopAuthDept__findPage<br><br>&#123;<br>   &quot;query&quot;: &#123;<br>      &quot;filter&quot;: &#123;<br>          &quot;$type&quot;: &quot;or&quot;,<br>          &quot;$body&quot;: [<br>             &#123;<br>                &quot;$type&quot;: &quot;eq&quot;,<br>                &quot;name&quot;: &quot;status&quot;,<br>                &quot;value&quot;: 1<br>             &#125;,<br>             &#123;<br>                &quot;$type&quot;: &quot;gt&quot;,<br>                &quot;name&quot;: &quot;parent.status&quot;,<br>                &quot;value&quot;: 2<br>             &#125;<br>          ]<br>      &#125;,<br>      &quot;orderBy&quot;:[<br>         &#123;<br>           &quot;name&quot;: &quot;status&quot;,<br>           &quot;desc&quot; : false<br>         &#125;<br>      ]<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>query�����ں�̨��Ӧ��QueryBean�ṹ������һ��ͨ�õĲ�ѯģ�ͣ�������XML��ʽ��JSON��ʽ֮������ת����</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">query</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">filter</span>&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">or</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">eq</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;status&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;1&quot;</span> /&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">gt</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;parent.status&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;2&quot;</span> /&gt;</span><br>     <span class="hljs-tag">&lt;/<span class="hljs-name">or</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">filter</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">orderBy</span>&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">field</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;status&quot;</span> <span class="hljs-attr">desc</span>=<span class="hljs-string">&quot;false&quot;</span> /&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">orderBy</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">query</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>ͨ��QueryBean��ѯģ�ͣ����ǿ��Ա������Ƕ��and&#x2F;or��ϵ�ĸ��Ӳ�ѯ���������ҽ�����NopORM����Ĺ�����ѯ���������ǿ���ͨ��<code>parent.status</code>���ָ��������﷨���Զ�ʵ�����ӱ�������ѯ��</p>
<blockquote>
<p>һ�������ͨ��һ��ͳһ��findPage������������ɸ���ҵ���ѯ������Ҫ������д�����Ĳ�ѯ����������ͨ��XMetaģ����������Щ�ֶ��ܹ�֧����Щ��ѯ����������һ���ܲ�ѯ�����ֶεȣ���ֹǰ�˹��츴�Ӳ�ѯ�γɾܾ����񹥻���</p>
</blockquote>
<p><strong>ÿ��ģ�Ͷ��ǿ��Կ�����һ��DSL����ͬһ��DSL�ڲ�ͬ��Ӧ�ó����¿����ò�ͬ�Ľ�����ȥ��������</strong>����Ȼ����QueryBeanģ��Ϊ�������ǿ��Խ���ת��ΪSQL����͵����ݿ���ִ�У�Ҳ���Խ�������Ϊ�ڴ������е�Predicate�����������������ʹ��QueryBeanģ�������︴���ж���������ǰ̨��ҵ�������������Ը���DSL�������Զ����ɿ��ӻ�չ�ֺͱ༭���ߵȡ�</p>
<p><img src="/knosys/project-nop-entropy/dev-guide/rule/images/rule-model.png"></p>
<p>Nopƽ̨�����˴���DSL�������ṩ�˸��ֱ���任�ֶΣ�����ÿ��DSL���Զ�����Excel���������̿���ͨ��Excel������֧��DSL֮����޷�Ƕ�롣��ʹ����������һ���ҵ�񿪷���ʱ�򲢲���Ҫ�����µ�DSL��<br>�����Ⲣ����ζ������ֻ��ʹ��Nopƽ̨���õ�ģ�����塣Nopƽ̨�����е�ģ����ʵ��ִ��֮ǰ���ᾭ�����ģ�ͱ任����������������ǿ��������Լ���DSL�﷨������򣬴Ӷ�Ϊ���е�DSLģ�������µ���չ���塣</p>
<p>һ����Nopƽ̨�г��õļ�����ʹ��ǰ׺�����﷨��������˵��������һ���ر��ǰ׺������<code>@filter:</code>��ͨ����<strong>��һ��ֵ��ǿΪһ�����Ա���������ǿ������ṹ</strong>��</p>
<blockquote>
<p>����ǰ׺�����﷨����ϸ���ܣ��μ��ҵ����� <a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/548314138">DSL�ֲ��﷨��Ƽ�ǰ׺�����﷨</a></p>
</blockquote>
<p>���������ĺô��ǿ��Ի�����֤ԭ��DSLģ�͵�������ʽ���䣬���ھֲ�������չ���Ӷ����Ժ��������﷨�ṹ�����һ��</p>
<p>�����������һ������Ĳ�ѯ����ϣ���ܹ��Լ��ķ�ʽ���˵��Ѿ���ѡ�еļ�¼����һ�������ʹ��ǰ׺�����﷨��ʾΪ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">notIn</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;@filter:selectedItemIds&quot;</span> /&gt;</span><br></code></pre></td></tr></table></figure>

<p>CrudBizModel�����еĲ�ѯ��������Ӧ��ȫ�ֵ�IQueryTransformerת������</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">IQueryTransformer</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">transform</span><span class="hljs-params">(QueryBean filter, String authObjName, String action,</span><br><span class="hljs-params">                   IBizObject bizObj, IServiceContext context)</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>�����һ����XMeta�����������ǿ���ͨ��bizObj��ȡ��XMeta�е���չ������Ϣ���Ӷ�����<code>@filter:</code>ǰ׺����ı���ʽ��ν��͡�һ�ֿ��е�������ֱ�ӽ���ӳ��Ϊĳ��Xplģ���ǩ��Ȼ�������Ӳ�ѯ�����߶�̬��ȡ����Ӧ�����ݼ��ϡ�</p>
<h2 id="��-ͨ��XBizg�����ӷ�����"><a href="#��-ͨ��XBizg�����ӷ�����" class="headerlink" title="��. ͨ��XBizģ�����ӷ�����"></a>��. ͨ��XBizģ�����ӷ�����</h2><p>Nopƽ̨���߼���ȫ����֯�ṹ����㷺��������Docker������Ƭ�ķֲ���ӽṹ�����ں�̨������ԣ�Nopƽ̨�������ǽ�ҵ�����BizObject�ֽ�Ϊ���в�ͬ���ȼ��Ķ����Ƭ��</p>
<p><img src="/knosys/project-nop-entropy/dev-guide/biz/gather-and-scatter.png"></p>
<p>������˵��Java��д��CrudBizModel���Կ�����һ����������Ϊ��Ƭ��������ProCodeģʽ������ÿ��ҵ�������һ����Ե�XBizģ���ļ���XML��ʽ�������൱����һ����չBizModel��DSL���ԣ�<br>���������ǿ���ʹ��XML�﷨������ҵ�񷽷���XBizģ���൱����һ�����ȼ����ߵ���Ϊ��Ƭ���������ڵײ��CrudBizModel֮�ϡ������XBizģ���ж�����ͬ���ķ��񷽷������ֱ�Ӹ���Java�е�ʵ�֡����û�����������Ϊҵ���������ҵ�񷽷����ڸ��ϲ㣬�������޴�����ģʽ������Ķ�̬��Ϊ��Ƭ�������Ա��������ݿ��ĳ����̬ģ�Ͷ�����У���������ʱ���Զ����ط���Ϊ�����ļ�ϵͳ�е�һ��ģ���ļ���Ȼ�����������ļ�ϵͳ��Delta���ƻ��Ƹ���ԭ�е�XBiz�ļ���</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">biz</span> <span class="hljs-attr">x:schema</span>=<span class="hljs-string">&quot;/nop/schema/biz/xbiz.xdef&quot;</span> <span class="hljs-attr">xmlns:x</span>=<span class="hljs-string">&quot;/nop/schema/xdsl.xdef&quot;</span></span><br><span class="hljs-tag">     <span class="hljs-attr">x:extends</span>=<span class="hljs-string">&quot;_NopAuthUser.xbiz&quot;</span> <span class="hljs-attr">xmlns:bo</span>=<span class="hljs-string">&quot;bo&quot;</span> <span class="hljs-attr">xmlns:c</span>=<span class="hljs-string">&quot;c&quot;</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">actions</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">query</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;active_findPage&quot;</span> <span class="hljs-attr">x:prototype</span>=<span class="hljs-string">&quot;findPage&quot;</span>&gt;</span><br><br>            <span class="hljs-tag">&lt;<span class="hljs-name">source</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">c:import</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;io.nop.auth.api.AuthApiConstants&quot;</span> /&gt;</span><br><br>                <span class="hljs-tag">&lt;<span class="hljs-name">bo:DoFindPage</span> <span class="hljs-attr">query</span>=<span class="hljs-string">&quot;$&#123;query&#125;&quot;</span> <span class="hljs-attr">selection</span>=<span class="hljs-string">&quot;$&#123;selection&#125;&quot;</span> <span class="hljs-attr">xpl:lib</span>=<span class="hljs-string">&quot;/nop/biz/xlib/bo.xlib&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">filter</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">eq</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;status&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;AuthApiConstants.USER_STATUS_ACTIVE&#125;&quot;</span> /&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">filter</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">bo:DoFindPage</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">source</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">query</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">actions</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">biz</span>&gt;</span><br></code></pre></td></tr></table></figure>

<ul>
<li>XBizģ�Ϳ���ͨ��ͨ�õ�<code>x:extends</code>�﷨���̳����е�ģ���ļ����ߴ����������Զ����ɵ�ģ���ļ���</li>
<li>��<code>&lt;source&gt;</code>�������ǿ���ʹ��Xplģ�������е��Զ����ǩ��ʵ���Զ����װ��<strong>Xplģ�������ṩ����ʽ�����ͱ����ڱ任�Ȼ��ƣ�����ʵ�ֱ�һ��������Ը����������ض�����</strong>��</li>
</ul>
<p>����<code>bo.xlib</code>��ǩ���ṩ�˶���CrudBizModel��<code>doFindPage/doFindList</code>�Ⱥ����ķ�װ��</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">source</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bo:DoFindPage</span> <span class="hljs-attr">bizObjName</span>=<span class="hljs-string">&quot;NopAuthUser&quot;</span> <span class="hljs-attr">xpl:lib</span>=<span class="hljs-string">&quot;/nop/biz/xlib/bo.xlib&quot;</span> <span class="hljs-attr">selection</span>=<span class="hljs-string">&quot;items&#123;name,status&#125;&quot;</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">filter</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">c:if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;$&#123;xxx&#125;&quot;</span>&gt;</span><br>             <span class="hljs-tag">&lt;<span class="hljs-name">eq</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;status&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;1&quot;</span> /&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">c:if</span>&gt;</span>  <br><br>          <span class="hljs-comment">&lt;!--����ʹ�ø����ı��﷽ʽ --&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">eq</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;status&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;1&quot;</span> <span class="hljs-attr">xpl:if</span>=<span class="hljs-string">&quot;xxx&quot;</span> /&gt;</span><br>       <span class="hljs-tag">&lt;/<span class="hljs-name">filter</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bo:DoFindPage</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">source</span>&gt;</span><br></code></pre></td></tr></table></figure>

<ul>
<li><code>&lt;bo:DoFindPage&gt;</code>��ǩ���ָ����<code>bizObjName</code>�����ͻ����ָ��ҵ������ϵķ������������õ�ǰ�������е�<code>thisObj</code>�����ϵķ�����</li>
<li>���ָ����selection����������ڻ�ȡ��ʵ�����֮���Զ�����<code>dao.batchLoadSelection(entityList,selection)</code>������������������ָ�������ԣ������������ʱ��������ӳټ���Ӱ�����ܡ�</li>
<li><code>&lt;bo:DoFindPage&gt;</code>��ǩ��filter�ӽڵ㱾�������ṩ�˵�һ�����ᵽ��<code>doFindPage</code>������<code>prepareQuery</code>�ص��������������ʹ��Xplģ����������̬���ɲ�ѯ������</li>
</ul>
<p>�����ǩ�е�bizObjName���Ժ�selection���Եľ���ʵ�ַ�ʽ������˼�����Ƕ���������Xpl�Զ����ǩ�ı�����ת��������ʵ�֡�</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><code class="hljs xml"> <span class="hljs-tag">&lt;<span class="hljs-name">DoFindPage</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">attr</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;query&quot;</span> <span class="hljs-attr">optional</span>=<span class="hljs-string">&quot;true&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;io.nop.api.core.beans.query.QueryBean&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">attr</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;authObjName&quot;</span> <span class="hljs-attr">optional</span>=<span class="hljs-string">&quot;true&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;String&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">attr</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;selection&quot;</span> <span class="hljs-attr">optional</span>=<span class="hljs-string">&quot;true&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;io.nop.api.core.beans.FieldSelectionBean&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">attr</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;bizObjName&quot;</span> <span class="hljs-attr">optional</span>=<span class="hljs-string">&quot;true&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">attr</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;thisObj&quot;</span> <span class="hljs-attr">implicit</span>=<span class="hljs-string">&quot;true&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;io.nop.biz.api.IBizObject&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">attr</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;svcCtx&quot;</span> <span class="hljs-attr">implicit</span>=<span class="hljs-string">&quot;true&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;io.nop.core.context.IServiceContext&quot;</span>/&gt;</span><br><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">transform</span>&gt;</span><br>         <span class="hljs-tag">&lt;<span class="hljs-name">c:script</span>&gt;</span>&lt;![CDATA[<br>            const bizObjName = node.attrText(&#x27;bizObjName&#x27;);<br>            if(bizObjName != null)&#123;<br>               $.checkArgument(bizObjName.$isValidSimpleVarName(),&quot;bizObjName&quot;);<br>               node.setAttr(node.attrLoc(&#x27;bizObjName&#x27;),&#x27;thisObj&#x27;, &quot;$&#123;inject(&#x27;nopBizObjectManager&#x27;).getBizObject(&#x27;&quot; +bizObjName+&quot;&#x27;)&#125;&quot;);<br>            &#125;<br>            const selection = node.attrText(&#x27;selection&#x27;);<br>            if(selection and !selection.contains(&#x27;$&#123;&#x27;))&#123;<br>                node.setAttr(node.attrLoc(&#x27;selection&#x27;),&#x27;selection&#x27;, &quot;$&#123;selection(&#x27;&quot;+selection+&quot;&#x27;)&#125;&quot;);<br>            &#125;<br>        ]]&gt;<span class="hljs-tag">&lt;/<span class="hljs-name">c:script</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">transform</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">source</span>&gt;</span><br>      ...<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">source</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">DoFindPage</span>&gt;</span>        <br></code></pre></td></tr></table></figure>

<p>�ڱ����ڷ�����bizObjName����selection�����ǿգ����Զ�������ת��Ϊ����ʽ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bo:DoFindPage</span> <span class="hljs-attr">thisObj</span>=<span class="hljs-string">&quot;$&#123;inject(&#x27;nopBizObjectManager&#x27;).getBizObject(&#x27;NopAuthUser&#x27;)&#125;&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">selection</span>=<span class="hljs-string">&quot;$&#123;selection(&#x27;items&#123;name,status&#125;&#x27;)&#125;&quot;</span>&gt;</span><br>  ...<br><span class="hljs-tag">&lt;/<span class="hljs-name">bo:DoFindPage</span>&gt;</span><br></code></pre></td></tr></table></figure>

<ul>
<li><p>selection������һ��ȫ�ֺ꺯���������ڱ����ڽ����Լ��Ĳ�������ת��Ϊһ��<code>FieldSelectionBean</code>������������ֱ��ʹ�ý����õĽ���������ظ�������</p>
</li>
<li><p>�����ʹ��Java����ȥʵ��ͬ���������Ƚϣ��������Է���Xpl��ǩ�ڵ��õ�ʱ����Ӽ�࣬���Ա����ظ�������Щ�����Զ��Ƶ���������Ϣ��</p>
</li>
<li><p>��������һ�����Ҫ���� “ָ����bizObjName�����͵���ָ�����󣬷���͵���thisObj��ǰ����”��һ�߼���α�������ǲ���Ҫʹ��thisObj��ʱ���ܷ���DSL��������ȫ������һ���</p>
</li>
</ul>
<h2 id="��-ͨ��Ԫ�����oXBizg��"><a href="#��-ͨ��Ԫ�����oXBizg��" class="headerlink" title="��. ͨ��Ԫ�����ǿXBizģ��"></a>��. ͨ��Ԫ�����ǿXBizģ��</h2><p>һ������XBiz������DSLģ���ļ����Ϳ�������ʩչ��׼����Ԫ�����·��ΪDSLģ�����������Զ�����չ�����磬��XBiz�ļ��У����ǿ���ͨ�����·�ʽ�����߼�����֧�֡�</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">biz</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">x:post-extends</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">biz-gen:TaskFlowSupport</span> <span class="hljs-attr">xpl:lib</span>=<span class="hljs-string">&quot;/nop/core/xlib/biz-gen.xlib&quot;</span>/&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">x:post-extends</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">actions</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mutation</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;callTask&quot;</span> <span class="hljs-attr">task:name</span>=<span class="hljs-string">&quot;test/DemoTask&quot;</span>/&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">actions</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">biz</span>&gt;</span><br></code></pre></td></tr></table></figure>

<ul>
<li><p><code>x:post-extends</code>��ģ�ͽ����ı������Զ�ִ�У�ͨ��<code>&lt;biz-gen:TaskFlowSupport&gt;</code>��ǩ���Զ��Ծ���<code>task:name</code>�ĺ����ڵ���б任���Զ����ɵ���TaskFlowManager�Ĵ��롣</p>
</li>
<li><p>���ǿ���ʹ�ÿ��ӻ����߼���������������<code>Task</code>��Ȼ����XBizģ����ֻҪΪ������ָ������������<code>task:name</code>���ɡ�</p>
</li>
</ul>
<p>��ϸ�Ľ��ܲμ� </p>
<ul>
<li><p><a href="../../workflow/task-flow-for-biz/">ͨ��NopTaskFlow�߼�����ʵ�ֺ�̨������</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/612512300">XDSL��ͨ�õ������ض��������</a></p>
</li>
</ul>

</div>
      <footer class="Article-footer col-md-3">
        
          
          
          
          
            
          
          
            <div class="Widget">
              <div class="Widget-body"><a href="https://gitee.com/canonical-entropy/nop-entropy/edit/master/docs/dev-guide/biz/biz-customization.md" target="_blank" rel=" rel="external nofollow"">在 Gitee 上编辑文档内容</a></div>
            </div>
          
        
        
  

  <section class="Widget Widget--toc">
  <div class="Widget-header">
    <h2 class="Widget-title">目录</h2>
  </div>
  <div class="Widget-body"></div>
</section>



      </footer>
    </article>
    <footer class="Page-footer Footer">
  <div class="container-fluid">
    
    <div class="Footer-description">
      
        <!-- Important links -->
        <nav class="Footer-navs">
          <ul><li><a href="/projects/nop-entropy/docs"><span>指南</span></a>
</li><li><a href="/community"><span>社区</span></a>
</li><li><a href="https://github.com/nop-platform?utm_source=https://nop-platform.gitee.io&amp;utm_medium=common-footer" target="_blank" rel="external nofollow"><span>GitHub</span></a>
</li><li><a href="https://gitee.com/nop-platform?utm_source=https://nop-platform.gitee.io&amp;utm_medium=common-footer" target="_blank" rel="external nofollow"><span>Gitee</span></a>
</li></ul>
        </nav>
      
      
        <!-- Copyright -->
        <div class="Footer-copyright">
          <p>

&copy; 2024 <a href="https://nop-platform.gitee.io?utm_source=https://nop-platform.gitee.io&amp;utm_medium=common-footer" target="_blank" rel="external nofollow">Nop 社区</a> 版权所有

</p>
          
          
        </div>
      
    </div>
  </div>
</footer>

  </main>
</div>




    <script>$('.Article-content > table').addClass('table table-bordered')</script>
    
<script src="/javascripts/ksio/vendors/share.min.js"></script>

<script src="/javascripts/ksio/components/page.js"></script>

<script src="/javascripts/ksio/components/toc.js"></script>

<script src="/javascripts/ksio/vendors/jquery.timeago.js"></script>

<script src="/javascripts/ksio/vendors/jquery.timeago.zh-CN.js"></script>

<script src="/javascripts/ksio/initializers/time.js"></script>

<script src="/javascripts/ksio/vendors/jquery.lazyload.js"></script>

<script src="/javascripts/ksio/initializers/lazyload.js"></script>

  </body>
</html>

